{"uid":"bf722f939414da64","name":"Reviewer recall offline study","fullName":"tests.scenarios.offline_study.test_offline_studys.TestOfflineStudies#test_reviewer_recall_offline_study","historyId":"03ed120e2e4d1137e159c1d09bd0bf4b","time":{"start":1733114429542,"stop":1733114432217,"duration":2675},"description":"This test case test Api to recall offline study when reviewer want some changes in offline study","descriptionHtml":"<p>This test case test Api to recall offline study when reviewer want some changes in offline study</p>\n","status":"broken","statusMessage":"KeyError: 'residue_mapping'","statusTrace":"self = <test_offline_studys.TestOfflineStudies object at 0x0000020223754D50>\n\n    @allure.title(\"Reviewer recall offline study\")\n    @allure.description(\"This test case test Api to recall offline study when reviewer want some changes in offline \"\n                        \"study\")\n    @allure.link(\"https://app.clickup.com/t/85zrvrrgt\")\n    @pytest.mark.reviewer_recall_offline_study\n    def test_reviewer_recall_offline_study(self):\n        global APPROVAL_ID\n        data = {}\n        update_data = {\"study_name\": \"Test Offline Study\"}\n        study_data = {\"study_name\": update_data[\"study_name\"]}\n        data.update(study_data)\n    \n        self.offline_studies.test_offline_study_approval_assign(data)\n    \n        approval_details = self.offline_studies.test_get_offline_study_detail(data)[\"response\"]\n        APPROVAL_ID = json.loads(approval_details)\n        electronic_record_id = APPROVAL_ID[\"result\"][\"erApproval\"][\"id\"]\n        self.login_logout.test_logout()\n        login_data = {\"username\": Env.get_env_data(\"QA_USERNAME\"), \"password\": Env.get_env_data(\"QA_PASSWORD\")}\n        self.login_logout.test_login_user_id(login_data)\n    \n        user_name = self.approve_review.login_as_reviewer()\n        payload = request_change_study(user_name, electronic_record_id)\n        url = const.OFFLINE_STUDY_SUBMIT + const.REQUEST_CHANGE\n        response = Request.put(url, data=payload, use_facility_url=True)\n        status_200(response)\n        self.login_logout.test_logout()\n    \n        submit_login_data = {\"username\": Env.get_env_data(\"ADMIN_USERNAME\"), \"password\": Env.get_env_data(\"ADMIN_PASSWORD\")}\n        self.login_logout.test_login_user_id(submit_login_data)\n        submitter = self.approve_review.login_as_submitter()\n        submit_url = const.OFFLINE_STUDY_SUBMIT + \"/\" + str(electronic_record_id) + const.RECALL_STUDY\n        recall_payload = recall_study(submitter)\n        response = Request.put(submit_url, data=recall_payload, use_facility_url=True)\n        status_200(response)\n    \n>       self.test_update_target_residue_detail_offline_study()\n\ntests\\scenarios\\offline_study\\test_offline_studys.py:533: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ntests\\scenarios\\offline_study\\test_offline_studys.py:483: in test_update_target_residue_detail_offline_study\n    target_residue = self.offline_studies.get_active_residue(data)[\"active_residue\"]\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndata = {'inter_residue': 'intermediate', 'material_name': 'Alendronate sodium', 'residue_type': 'Active', 'study_id': None, ...}\n\n    @staticmethod\n    def get_active_residue(data):\n        active_residue = None\n        hs_eq_mat_id = None\n        if data is None:\n            for i in RESIDUE_MAPPING[\"result\"][\"materials\"]:\n                active_residue = i[\"id\"]\n            for i in RESIDUE_MAPPING[\"result\"][\"mappingData\"]:\n                for j in i[\"hsEqMatPrMappings\"]:\n                    hs_eq_mat_id = j[\"hsEqMatId\"]\n        else:\n>           for i in data[\"residue_mapping\"][\"result\"][\"materials\"]:\nE           KeyError: 'residue_mapping'\n\ntests\\unit\\offline_study\\test_offline_study.py:161: KeyError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":3,"retriesStatusChange":false,"beforeStages":[{"name":"login","time":{"start":1733114429099,"stop":1733114429432,"duration":333},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"get_facility","time":{"start":1733114429432,"stop":1733114429542,"duration":110},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"tag","value":"reviewer_recall_offline_study"},{"name":"tag","value":"update_offline_studies"},{"name":"parentSuite","value":"tests.scenarios.offline_study"},{"name":"suite","value":"test_offline_studys"},{"name":"subSuite","value":"TestOfflineStudies"},{"name":"host","value":"DESKTOP-ESU2KLG"},{"name":"thread","value":"27160-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.scenarios.offline_study.test_offline_studys"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"https://app.clickup.com/t/85zrvrrgt","url":"https://app.clickup.com/t/85zrvrrgt","type":"link"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"54f614f8fbbbd629","status":"broken","statusDetails":"KeyError: 'erApproval'","time":{"start":1733072114084,"stop":1733072114146,"duration":62}},{"uid":"10ae00881b8054b2","status":"broken","statusDetails":"KeyError: 'erApproval'","time":{"start":1733044423708,"stop":1733044423771,"duration":63}},{"uid":"3f7b2983fbac1af9","status":"broken","statusDetails":"KeyError: 'erApproval'","time":{"start":1732985008275,"stop":1732985008333,"duration":58}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["update_offline_studies","reviewer_recall_offline_study"]},"source":"bf722f939414da64.json","parameterValues":[]}