{"uid":"63a176baff356d61","name":"Update target residue details of offline study","fullName":"tests.scenarios.offline_study.test_offline_studys.TestOfflineStudies#test_update_target_residue_detail_offline_study","historyId":"dfdd53ecd04bf871db271b94cd8877c4","time":{"start":1733114415954,"stop":1733114416821,"duration":867},"description":"This test case test Api to update the target residue details of offline study like add more rows or update residue type or target residue","descriptionHtml":"<p>This test case test Api to update the target residue details of offline study like add more rows or update residue type or target residue</p>\n","status":"broken","statusMessage":"KeyError: 'residue_mapping'","statusTrace":"self = <test_offline_studys.TestOfflineStudies object at 0x000001A3489307D0>\n\n    @allure.title(\"Update target residue details of offline study\")\n    @allure.description(\"This test case test Api to update the target residue details of offline study like add more \"\n                        \"rows or update residue type or target residue\")\n    @allure.link(\"https://app.clickup.com/t/861mprc7e\")\n    @pytest.mark.update_target_residue_detail_offline_study\n    def test_update_target_residue_detail_offline_study(self):\n        data = {}\n    \n        self.test_update_offline_study_eq_material_production()\n        max_observe_size = unit_data.OFFLINE_STUDY[\"observe_value\"]\n        update_data = {\"study_name\": \"Test Offline Study\", \"study_id\": None, self.intermediate_key: \"intermediate\"}\n        study_data = {\"study_name\": update_data[\"study_name\"], \"study_id\": update_data[\"study_id\"],\n                      \"inter_residue\": update_data[self.intermediate_key]}\n        data.update(study_data)\n        self.offline_studies.offline_study_methods(data)\n        material_name_list = self.offline_studies.get_material_id_type(data)[\"mat_name\"]\n        material_name = self.offline_studies.get_material_id_type(data)[\"material_name\"]\n        if const.FACILITY_TYPE != \"api\":\n            residue_id = self.offline_studies.get_material_id_type(data)[\"mat_id\"]\n            residue_type = \"Active\"\n        else:\n            residue_id = self.offline_studies.get_material_id_type(data)[\"mat_id\"]\n            residue_type = \"Intermediate\"\n    \n        update_data = {\"material_name\": material_name}\n        study_data = {\"material_name\": update_data[\"material_name\"]}\n        data.update(study_data)\n        for i, j in zip(material_name_list, residue_id):\n            update_data = {\"residue_type\": residue_type, \"material_name\": i}\n            study_data = {\"residue_type\": update_data[\"residue_type\"], \"material_name\": update_data[\"material_name\"]}\n            data.update(study_data)\n>           target_residue = self.offline_studies.get_active_residue(data)[\"active_residue\"]\n\ntests\\scenarios\\offline_study\\test_offline_studys.py:483: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndata = {'inter_residue': 'intermediate', 'material_name': 'Acetaminophen', 'residue_type': 'Active', 'study_id': None, ...}\n\n    @staticmethod\n    def get_active_residue(data):\n        active_residue = None\n        hs_eq_mat_id = None\n        if data is None:\n            for i in RESIDUE_MAPPING[\"result\"][\"materials\"]:\n                active_residue = i[\"id\"]\n            for i in RESIDUE_MAPPING[\"result\"][\"mappingData\"]:\n                for j in i[\"hsEqMatPrMappings\"]:\n                    hs_eq_mat_id = j[\"hsEqMatId\"]\n        else:\n>           for i in data[\"residue_mapping\"][\"result\"][\"materials\"]:\nE           KeyError: 'residue_mapping'\n\ntests\\unit\\offline_study\\test_offline_study.py:161: KeyError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"login","time":{"start":1733114415527,"stop":1733114415799,"duration":272},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false,"hasContent":false},{"name":"get_facility","time":{"start":1733114415799,"stop":1733114415954,"duration":155},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false,"hasContent":false}],"afterStages":[],"labels":[{"name":"tag","value":"update_target_residue_detail_offline_study"},{"name":"tag","value":"update_offline_studies"},{"name":"parentSuite","value":"tests.scenarios.offline_study"},{"name":"suite","value":"test_offline_studys"},{"name":"subSuite","value":"TestOfflineStudies"},{"name":"host","value":"DESKTOP-ESU2KLG"},{"name":"thread","value":"27624-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.scenarios.offline_study.test_offline_studys"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"https://app.clickup.com/t/861mprc7e","url":"https://app.clickup.com/t/861mprc7e","type":"link"}],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["update_target_residue_detail_offline_study","update_offline_studies"]},"source":"63a176baff356d61.json","parameterValues":[]}